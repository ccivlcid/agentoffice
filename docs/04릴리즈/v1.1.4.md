# HyperClaw v1.1.4 Release Notes

- Release date: 2026-02-22
- Scope: Auto-update governance hardening for existing installs (legacy-safe defaults, runtime toggle control, and one-time upgrade notice).

## Highlights

- **Global Auto Update Toggle in Settings**
  - Added `Auto Update (Global)` in **Settings > General**.
  - This controls auto-update behavior at server scope (not per-user).

- **Immediate Runtime Apply for Toggle Changes**
  - Added `POST /api/update-auto-config`.
  - Toggle changes now apply at runtime without requiring process restart.

- **Legacy Upgrade Detection + One-Time Notice**
  - Added new settings keys:
    - `autoUpdateEnabled`
    - `autoUpdateNoticePending`
  - During migration:
    - existing installs (upgraded from `v1.1.3` or lower) are initialized with `autoUpdateEnabled=false` and `autoUpdateNoticePending=true`
    - new installs are initialized with `autoUpdateEnabled=false` and `autoUpdateNoticePending=false`
  - Existing users see a one-time in-app notice about the new Auto Update toggle.

- **Safe-Mode Policy Hardening (Fail-Closed)**
  - Added `channel_check_unavailable` guard.
  - If release metadata is unavailable while channel policy must be enforced, apply is blocked (non-overridable).
  - This prevents force-mode channel-policy bypass in metadata-loss scenarios.

- **Status Payload Clarity**
  - `/api/update-auto-status` now reports:
    - configured/default state
    - settings state
    - effective runtime state
    - scheduler readiness

## Changed Files (Major)

### Frontend
- `src/App.tsx`
- `src/components/SettingsPanel.tsx`
- `src/api.ts`
- `src/types/index.ts`

### Backend
- `server/modules/routes/core.ts`
- `server/server-main.ts`

### Docs
- `README.md`
- `README_ko.md`
- `README_jp.md`
- `README_zh.md`
- `docs/releases/README.md`
- `docs/releases/v1.1.4.md`

## Verification

- `pnpm test`
  - web: 11 passed
  - api: 29 passed

## Notes

- Existing installations remain safe by default (`autoUpdateEnabled=false`) after upgrade.
- Operators can enable auto-update from Settings when ready.
