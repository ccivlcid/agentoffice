# 오피스 뷰 · 팀장 회의 소집 기능 기획서

> HAIFeR Web IDE · Office View — Team Leader Meeting Convene  
> 문서 버전 1.0 | 2026-02 기준

---

## 0. 문서 목적

- 오피스 뷰에서 **팀장(team_leader)만 소집하여 회의**하는 기능의 요구사항·구조·UI를 문서로 정리한다.
- 구현 전 기획·합의용으로 사용하며, 기존 회의(미팅)·의사결정·오피스 뷰 설계와 정합성을 유지한다.
- 실제 코드 변경은 본 문서 검토·승인 후 단계별로 진행한다.

---

## 1. 배경 및 목표

### 1.1 배경

- 현재 **부서 클릭 시 해당 부서 팀장과 1:1 채팅**으로 소통하는 흐름이 있다.
- **전체 회의**는 태스크 기반(kickoff/review)으로 `MeetingPresence`, `CeoOfficeCall` 등이 사용된다.
- 팀장만 모아서 **방향 정리·의사결정**을 하고 싶은 수요에 대응하기 위해, **팀장만 참석하는 회의**를 별도 진입점으로 제공하는 것이 목표이다.

### 1.2 목표

| 항목 | 내용 |
|------|------|
| **진입점** | 오피스 뷰에서 “팀장 회의 소집” 액션을 한 번에 실행할 수 있게 한다. |
| **참가자** | `role === 'team_leader'` 인 에이전트만 회의 참가자로 한다. |
| **연계** | 기존 회의록·의사결정·채팅 흐름과 자연스럽게 연결되도록 한다. |
| **UX** | 소집 시 “팀장 N명 소집” 등 안내를 주고, 참가자(팀장) 목록을 명확히 보여 준다. |

### 1.3 비목표 (본 버전에서 다루지 않음)

- 팀장이 아닌 “특정 역할만” 또는 “직접 선택한 에이전트만” 소집하는 기능은 별도 기획에서 다룬다.
- 회의 내용의 실시간 협업 편집·화상 회의 등은 범위 밖이다.

---

## 2. AS-IS 요약

### 2.1 관련 구조

| 구분 | 현재 구조 | 비고 |
|------|-----------|------|
| **에이전트 역할** | `Agent.role`: `team_leader` \| `senior` \| `junior` \| `intern` | 팀장 필터링에 사용 |
| **부서 클릭** | `onSelectDepartment(dept)` → 해당 부서 `team_leader` 찾아 채팅 오픈 | 1:1 팀장 채팅 |
| **회의 참가** | `MeetingPresence`: `agent_id`, `seat_index`, `phase`(kickoff/review), `task_id` | 태스크 기반 회의 |
| **CEO 소집** | `CeoOfficeCall`: `fromAgentId`, `phase`, `taskId`, `action` 등 | 서버/이벤트 기반 소집 |
| **회의록** | `setTaskPanel({ taskId, tab: "minutes" })` | 태스크별 회의록 탭 |

### 2.2 데이터 소스

- **에이전트 목록**: `App` → `OfficeView`에 `agents` 전달.
- **팀장 필터**: `agents.filter(a => a.role === 'team_leader')` 로 클라이언트에서 계산 가능.
- **회의 상태**: `meetingPresence`, `ceoOfficeCalls`, `activeMeetingTaskId` 등은 `App` 상태로 관리되며 서버/웹소켓과 연동될 수 있음.

### 2.3 유지해야 할 동작

- 기존 **태스크 기반 회의**(kickoff/review) 흐름은 그대로 유지.
- **부서 클릭 → 팀장 채팅** 동작은 유지.
- **에이전트 클릭 → 에이전트 상세/채팅** 동작은 유지.

---

## 3. TO-BE 제안

### 3.1 진입점

- **위치**: 오피스 뷰 상단 또는 플로팅 액션 영역.
- **액션**: “팀장 회의 소집” 버튼(또는 메뉴 항목) 한 개.
- **표시 조건**  
  - 팀장이 1명 이상일 때만 버튼 노출(선택).  
  - 또는 항상 노출하고, 팀장 0명일 때는 클릭 시 “등록된 팀장이 없습니다” 안내.

### 3.2 사용자 플로우

1. 사용자가 오피스 뷰에서 **“팀장 회의 소집”** 클릭.
2. 시스템이 `role === 'team_leader'` 인 에이전트 목록을 확정.
3. **(A안)** 기존 회의 플로우 재사용  
   - “팀장 회의”용 **가상/특수 태스크** 또는 **회의 타입**을 하나 두고, 참가자를 팀장만으로 설정한 뒤 기존 `MeetingPresence` / 회의록 UI로 진입.
4. **(B안)** 팀장 전용 소집 이벤트  
   - `CeoOfficeCall`과 유사한 **“팀장 회의 소집” 이벤트**를 정의하고, 동일한 회의록/미팅 UI에서 “팀장 회의”로 표시·처리.
5. 회의록/미팅 화면에서 **참가자 목록 = 팀장 N명**으로 표시.

### 3.3 기존 회의와의 관계

| 항목 | 제안 |
|------|------|
| **참가자** | 기존: 태스크/이벤트 기준 · 신규: 팀장만(역할 기준). |
| **회의록** | 기존 “회의록” 탭/UI 재사용, 제목 또는 배지로 “팀장 회의” 구분. |
| **의사결정** | 팀장 회의에서 나온 결론이 있으면 기존 의사결정 인박스/플로우와 연계 검토(선택). |

### 3.4 빈 상태

- **팀장 0명**: “팀장 회의 소집” 클릭 시  
  - 문구: “등록된 팀장이 없습니다. 에이전트 관리에서 역할을 설정하세요.”  
  - CTA: “에이전트 관리” 링크/버튼 → 에이전트 관리 모달로 이동.

---

## 4. UI/UX 제안

### 4.1 버튼·라벨

| 요소 | 한국어 | English | 비고 |
|------|--------|---------|------|
| **소집 버튼** | 팀장 회의 소집 | Convene team leader meeting | 오피스 뷰 상단/플로팅 |
| **토스트/안내** | 팀장 N명 소집 | Convened N team leader(s) | 소집 성공 시(선택) |
| **빈 상태** | 등록된 팀장이 없습니다 | No team leaders registered | 팀장 0명 시 |
| **회의록 표시** | 팀장 회의 | Team leader meeting | 회의록 헤더/배지(선택) |

### 4.2 아이콘·위치

- **아이콘**: `lucide-react` 사용(이모지 없음). 예: `Users`(팀), `Megaphone`(소집), `CalendarCheck` 등 중 선택.
- **위치**: 오피스 뷰 제목 옆, 또는 우측 상단 액션 그룹(예: “휴게실 채용”과 같은 레벨)에 배치하여 **항상 보이거나, 팀장이 있을 때만** 노출.

### 4.3 접근성

- 버튼에 `aria-label` 제공(한/영 이중 언어).
- 팀장 0명일 때 안내 문구에 `role="alert"` 또는 `aria-live` 검토.

---

## 5. 데이터·API

### 5.1 클라이언트

- **팀장 목록**: `agents.filter(a => a.role === 'team_leader')` 로 계산. 별도 API 불필요.
- **소집 액션**:  
  - **(A안)** 기존 “회의 시작” API/이벤트에 “참가자=팀장 ID 목록” 또는 “회의 타입=team_leaders” 를 넘기는 방식 검토.  
  - **(B안)** “팀장 회의 소집” 전용 이벤트/API가 있으면 해당 호출.

### 5.2 서버(선택)

- 현재 회의/소집이 서버·웹소켓과 어떻게 연동되는지에 따라, “팀장 회의”용 이벤트 또는 회의 타입을 추가할지 결정.
- 문서 단계에서는 **클라이언트에서 팀장 필터 + 기존 회의 플로우 재사용**을 전제로 하고, 서버 확장은 구현 단계에서 정리.

---

## 6. 구현 단계 제안

| 단계 | 내용 | 산출물 |
|------|------|--------|
| **Phase 0** | 본 기획서 검토·합의 | 문서 확정 |
| **Phase 1** | 오피스 뷰에 “팀장 회의 소집” 버튼 추가 + 팀장 0명 빈 상태 안내 | 진입점·빈 상태 |
| **Phase 2** | 소집 클릭 시 기존 회의 플로우와 연결(가상 태스크 또는 회의 타입) | 팀장만 참가 회의 진입 |
| **Phase 3** | 회의록/미팅 화면에서 “팀장 회의” 표시 및 참가자(팀장) 목록 표시 | UX 정리 |
| **Phase 4** | (선택) 서버·웹소켓 연동 및 “팀장 회의” 이벤트 정의 | 연동 |

---

## 7. 참고

- **오피스 뷰 설계**: `docs/09UIUX/오피스뷰-카드그리드-설계.md`
- **UI/UX 전면 개편**: `docs/09UIUX/UI개편기획서.md`
- **컴포넌트 구조**: `docs/09UIUX/컴포넌트맵.md` §7 오피스/룸 관리
- **타입**: `src/types/index.ts` (`Agent.role`, `MeetingPresence`), `src/appHelpers.ts` (`CeoOfficeCall`)

---

## 8. 변경 이력

| 일자 | 버전 | 변경 내용 |
|------|------|-----------|
| 2026-02 | 1.0 | 초안 작성 (목표, AS-IS, TO-BE, UI/UX, 구현 단계) |
